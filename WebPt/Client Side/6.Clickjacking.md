
Clickjacking (UI Redressing) is an interface-based attack where a user is tricked into clicking on actionable content on a hidden website by clicking on some other decoy content in a different website.

**How it works (The Layers)**

- The attacker loads the target website (e.g., a bank) inside an `<iframe>`.
    
- They set the iframe's CSS opacity to `0` (making it invisible).
    
- They position this invisible iframe on top of a "Decoy" button (like "Claim Prize").
    
- When the user clicks the Decoy, they are actually clicking the hidden button on the target site.

**Why CSRF Tokens don't work here?** Since the user is _physically_ clicking the button on the real website (loaded inside the iframe), the browser sends the valid CSRF token along with the request. The server thinks it's a legitimate action.

**The Defense** To prevent this, websites use the `X-Frame-Options` HTTP header.

- `X-Frame-Options: DENY` (Do not allow this site to be loaded in an iframe anywhere).
    
- `X-Frame-Options: SAMEORIGIN` (Only allow iframes on the same site).
-

ex:-
<style>
   iframe {
       position:relative;
       width: 500px;
       height: 700px;
       opacity: 0.1; /* Trick: Pehle 0.1 rakho taaki dikhe ki button kahan hai, baad mein 0.0 kar dena */
       z-index: 2; /* Iframe upar rahega */
   }
   div {
       position:absolute;
       top: 300px; /* Isko adjust karke button ke peeche lana padega */
       left: 50px;
       z-index: 1; /* Ye nakli text niche rahega */
   }
</style>

<div>CLICK HERE TO WIN IPHONE</div>
<iframe src="https://YOUR-LAB-URL.web-security-academy.net/my-account"></iframe>


# `<iframe>` (The Container)
- **HTML mein:** `iframe` ka matlab hai **Inline Frame**.
    
- **Kaam:** Yeh aapke webpage mein ek "Khidki" (Window) bana deta hai jisme aap koi dusri site load kar sakte hain.
    
- **Attack mein role:** Hacker iska use karke **Target Website** (jaise `bank.com` ya `facebook.com`) ko apni site par load karta hai.

ex:-
<iframe src="https://facebook.com/delete-account"></iframe>


# `z-index` (The Layering / Stacking)
**Simple Matlab:** "Kaun kiske upar rahega."

Computer screen par 3 directions hoti hain:

1. **X-axis:** Left - Right
    
2. **Y-axis:** Up - Down
    
3. **Z-axis:** **Aage - Peeche (Depth)**
    

**`z-index`** decide karta hai ki Z-axis par kaunsi cheez sabse upar (top) hogi.

- Jiska number **bada**, wo **upar**.
    
- Jiska number **chota**, wo **neeche**.


==**Decoy Button:** `z-index: 1` (Visible but at the bottom).==
==**Target Iframe:** `z-index: 2` (Invisible but on top).==
==**The Click:** Since the iframe is on top, any click by the user lands on the iframe, not the decoy button underneath.==


## **Clickjacking (UI Redressing)**

> **Concept:** "Visual Deception." **Goal:** Trick the user into clicking something they didn't intend to.

### **The Mechanism**

1. **Container:** Load the target site inside an `<iframe>`.
    
2. **Invisibility:** Set CSS `opacity: 0.0` (Invisible but clickable).
    
3. **Layering:** Set CSS `z-index` high to place the iframe **on top** of a decoy button.
    

### **Why CSRF Tokens Fail Here?**

Because the user **actually clicks** the legitimate button (inside the hidden iframe), the browser sends the correct CSRF token with the request.

### **Defense**

- **X-Frame-Options Header:**
    
    - `DENY`: Never allow framing.
        
    - `SAMEORIGIN`: Allow framing only by the same site.